{% extends 'base.html' %}

{% block content %}

<div class="matrix-container">
  {% for matrix in matrices %}
    <div class="matrix-card">
      <button class="delete-btn" data-id="{{ matrix.id }}">Delete</button>

      <div class="matrix-preview" data-details="{{ loop.index0 }}">
        <h3>{{ matrix.data["Basic info"]["Title"] }} ({{ matrix.data["Basic info"]["Year"] }})</h3>
        <p><strong>Authors:</strong> {{ matrix.data["Basic info"]["Authors"] }}</p>
        <p><strong>Journal:</strong> {{ matrix.data["Basic info"]["Journal"] }}</p>
        <p><strong>DOI:</strong> {{ matrix.data["Basic info"]["doi"] }}</p>
        <div class="toggle-hint">Click to view full details â–¼</div>
      </div>

      <div class="matrix-details" id="details-{{ loop.index0 }}" style="display:none;">
        <section class="pass-section">
          <h2>ðŸ“˜ First Pass</h2>
          <ul>
            <li><strong>Category:</strong> {{ matrix.data["First_pass"]["Category"] }}</li>
            <li><strong>Context:</strong> {{ matrix.data["First_pass"]["Context"] }}</li>
            <li><strong>Correctness:</strong> {{ matrix.data["First_pass"]["Correctness"] }}</li>
            <li><strong>Contributions:</strong> {{ matrix.data["First_pass"]["Contributions"] }}</li>
            <li><strong>Clarity:</strong> {{ matrix.data["First_pass"]["Clarity"] }}</li>
          </ul>
        </section>

        <section class="pass-section">
          <h2>ðŸ“— Second Pass</h2>
          <ul>
            <li><strong>Rationale:</strong> {{ matrix.data["Second_pass"]["Rationale"] }}</li>
            <li><strong>Aims:</strong> {{ matrix.data["Second_pass"]["Aims"] }}</li>
            <li><strong>Hypothesis:</strong> {{ matrix.data["Second_pass"]["Hypothesis"] }}</li>
            <li><strong>Participants:</strong> {{ matrix.data["Second_pass"]["Participants"] }}</li>
            <li><strong>Method:</strong> {{ matrix.data["Second_pass"]["Method"] }}</li>
            <li><strong>Findings:</strong> {{ matrix.data["Second_pass"]["Findings"] }}</li>
            <li><strong>Implications:</strong> {{ matrix.data["Second_pass"]["Implications"] }}</li>
            <li><strong>Falsifiable:</strong> {{ matrix.data["Second_pass"]["Falsifiable"] }}</li>
            <li><strong>Limitations:</strong> {{ matrix.data["Second_pass"]["Limitations"] }}</li>
          </ul>
        </section>

        <section class="pass-section">
          <h2>ðŸ“™ Third Pass</h2>
          <ul>
            <li><strong>Assumptions:</strong> {{ matrix.data["Third_pass"]["Assumptions"] }}</li>
            <li><strong>Errors:</strong> {{ matrix.data["Third_pass"]["Errors"] }}</li>
            <li><strong>Missing Citations:</strong> {{ matrix.data["Third_pass"]["Missing Citations"] }}</li>
            <li><strong>Presentation:</strong> {{ matrix.data["Third_pass"]["Presentation"] }}</li>
            <li><strong>Support:</strong> {{ matrix.data["Third_pass"]["Support"] }}</li>
            <li><strong>Efficacy:</strong> {{ matrix.data["Third_pass"]["Efficacy"] }}</li>
          </ul>
        </section>
      </div>
    </div>
  {% endfor %}
</div>

<div id="matrix-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <div id="modal-details"></div>
  </div>
</div>

{% endblock %}